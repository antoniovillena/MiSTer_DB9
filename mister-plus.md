# MiSTer Plus

## Table of Contents

* [Products](#products)
* [Build](#build)
* [Setup](#setup)

## Products

* [IOUSB PLUS 128MB](https://www.antoniovillena.es/store/product/iousb-plus/)
* [Complete MiSTer PLUS](https://www.antoniovillena.es/store/product/complete-mister-plus/)

## Build

### Required Tools

* A hex 2mm or Torx T8 screw driver is required for tightening the screws.
* A 5mm hex nut driver can be used to tighten the pillars (they can be hand tightened as well).
* Flush cutters may be required if the DE10-Nano has leads sticking too far out the bottom.

### Step 1: Bottom Panel Orientation

Determine which side of the bottom panel faces up by positioning the DE10-Nano so the SD card slot lines up with the half circle cutout.

![The DE10-Nano positioned against the bottom panel](mister-plus/step-1.jpg)

### Step 2: Rubber Feet

Stick the rubber feet on the bottom side of the bottom panel.

![The bottom side of the bottom of the panel with rubber feet](mister-plus/step-2.jpg)

### Step 3: Bottom Panel Screws and Nuts

1. Take the four longer screws and slide them up through the bottom side of the bottom panel.
2. Take the four nuts and spin them most of the way down each screw.
3. Place the DE10-Nano on the bottom panel through the screws and see if it sits flat against it. If it doesn't, you may need to use flush cutters to trim the leads under the power input port (circled in red below).
4. Remove the DE10-Nano from the bottom panel once you've confirmed it's sitting correctly.

![A screw poking out of the bottom of the bottom panel with a nut screwed into the other side](mister-plus/step-3-a.jpg)
![The top side of the bottom panel with four screws poking out with a nut on each](mister-plus/step-3-b.jpg)
![The bottom of the DE10-Nano with a circle around the leads that might need to be trimmed](mister-plus/step-3-c.jpg)

### Step 4: Enable I2S/Analogue Audio Output

1. Orient the DE10-Nano so the network port is on the left side of the bottom.
2. Flip the bottom of the four switches to the right.
3. Ensure the other three switches are flipped to the left.

![The four switches on the DE10-Nano flipped to the correct positions](mister-plus/step-4.jpg)

### Step 5: Heat Sink

If one isn't already present, install the heat sink onto the largest chip in the center of the DE10-Nano.

![A heat sink installed on the DE10-Nano](mister-plus/step-5.jpg)

### Step 6: RAM Module

**Note:** If an existing RAM module is installed, remove it and use the included one as the typical style won't fit with the MiSTer Plus IO board.

1. Ensure the DE10-Nano is still oriented so the network port is on the left side of the bottom.
2. Install the included RAM module on the header pins on the right side, ensuring the "side facing outwards" is facing away from the DE10-Nano.

![The RAM module installed on the correct side](mister-plus/step-6.jpg)

### Step 7: Jumper

1. Orient the DE10-Nano so the network port is on the bottom of the right side.
2. On the top right port, plug the jumper into the top second and third pins from the left.

![The jumper plugged into the correct pins of the expected port](mister-plus/step-7.jpg)

### Step 8: USB Bridge

1. Ensure the DE10-Nano is still oriented so the network port is on the bottom of the right side.
2. Plug the USB bridge into the USB port on the top of the right side of the DE10-Nano.

![The USB port on the top of the right side of the DE10-Nano when oriented as expected, and the USB bridge next to it](mister-plus/step-8-a.jpg)
![The USB bridge plugged into the USB port on the DE10-Nano](mister-plus/step-8-b.jpg)

### Step 9: Connect the IO Board

1. Orient the IO board above the DE10-Nano with the hole in the IO board positioned over the RAM module on the DE10-Nano, then ensure that:
    * The single row of pins next to the hole in the IO board line up with the port next to the RAM module on the DE10-Nano.
    * The double row of pins on the side of the DE10-Nano opposite to the ones the RAM module is plugged into are lined up with the port on the IO board.
    * The pins on the USB bridge connected to the DE10-Nano line up with the port on the IO board.
    * The jumper plugged into the DE10-Nano line up with the equivalent pins on the IO board.
2. Once everything is lined up, slowly push the IO board down onto the DE10-Nano, ensuring all the sides go down evenly and that everything continues to connect correctly.

![The single row of pins on the IO board connecting to the port next to the RAM on the DE10-Nano](mister-plus/step-9-a.jpg)
![The double row of pins on DE10-Nano connecting to the port on the IO board](mister-plus/step-9-b.jpg)
![The pins on the USB bridge and the jumper connecting to the associated ports on the IO board](mister-plus/step-9-c.jpg)

### Step 10: Connect the Bottom Panel

1. Line the SD card slot on the DE10-Nano up with the half circle cutout on the bottom panel and slide the four posts down onto the screws and nuts you installed earlier.
2. Use the hex 2mm or Torx T8 screwdriver to screw the bottom panel most of the way into the DE10-Nano and IO board, leaving a bit of wiggle-room to make the sides easier to connect.
3. Ensure the four posts are secure by twisting the top ones clockwise.

![The bottom panel loosely connected to the DE10-Nano and IO board](mister-plus/step-10.jpg)

### Step 11: Connect the Sides

For each of the four side panels:

1. Position the side panel so any writing is facing towards the MiSTer Plus and the two tabs are at the bottom.
2. Find the side on the MiSTer Plus with ports that line up with the holes on the side panel.
3. Slide the two side panel tabs into slots on the bottom panel from an angle.
4. Push the top of the side panel towards the MiSTer Plus, lifting the MiSTer Plus a bit to help any ports enter the holes if necessary.
    * **Note**: If you're having difficulty getting ports through the holes, loosen the screws on the bottom panel a bit more to increase the amount of wiggle-room.
5. Once all four sides are installed, ensure they stay in place while tightening the four screws on the bottom panel.

![The side of the MiSTer Plus with the video, audio and power ports with its side panel getting installed at an angle](mister-plus/step-11-a.jpg)
![The same side panel as the previous image but fully in place](mister-plus/step-11-b.jpg)
![The side of the MiSTer Plus with the five USB ports with its side panel in place](mister-plus/step-11-c.jpg)
![The side of the MiSTer Plus with the ethernet port and DB9 port with its panel in place](mister-plus/step-11-d.jpg)

### Step 12: Connect OLED Display

1. Orient the MiSTer Plus so the RAM is at the top.
2. Locate the port directly to the right of the RAM module.
3. With the OLED display positioned so its four pins are on the left, plug it into the port you just located.
4. Peel the screen protector off of the OLED display.

![The OLED display port circled in red](mister-plus/step-12-a.jpg)
![The OLED display connected to the MiSTer Plus](mister-plus/step-12-b.jpg)

### Step 13: (Optional) Connect Internal USB

1. Locate the USB port on the top of the MiSTer Plus IO board, next to the fan.
2. Connect a small USB module such as a WiFi or Bluetooth adapter.

![The USB port on the top of the MiSTer Plus IO board with a bluetooth adapter connected it](mister-plus/step-13.jpg)

### Step 14: Install the Top Panel

1. Peel the white protective wrapper off of the top panel.
2. Orient the MiSTer Plus so the side with the white button is facing you.
3. Orient the top panel so the four slots are facing down towards the MiSTer Plus, and the three button holes are where the three buttons on the MiSTer Plus are.
4. Wipe any fingerprints and dust off the bottom side of the top panel.
5. Position the top panel so the slots on the side facing you are on top of the tabs on the side panel facing you.
6. Use the hex 2mm or Torx T8 screw driver to screw in the two screws on the side facing you, but don't tighten them yet.
7. Slide the two slots on the further side of the top panel onto the tabs of the further side panel.
8. Screw in the two screws on the further side of the top panel.
9. Inspect all the tabs and ensure they're inserted into the top panel correctly, then tighten the four screws.

![The top panel positioned against the MiSTer Plus](mister-plus/step-14-a.jpg)
![The top panel connected and screwed onto the MiSTer Plus](mister-plus/step-14-b.jpg)

### Step 15: Buttons

1. Take the three buttons and drop them into the three holes on the top panel.
2. Press each button to ensure it's secured.

![The three buttons inserted into the MiSTer Plus](mister-plus/step-15.jpg)

### Step 16: Boot

1. If you haven't already installed MiSTer on your micro SD card, follow the [official setup guide](https://github.com/MiSTer-devel/Main_MiSTer/wiki/Setup-Guide).
2. Insert your micro SD card into the slot above the half circle cutout on the bottom panel.
3. Either connect an HDMI cable to a compatible monitor, or use the VGA port and green audio port next to it to connect an analogue display.
    * **Note**: If you're using YPbPr on VGA output (VGA->component), in addition to setting `ypbpr=1` in your `MiSTer.ini`, you also need to set `composite_sync=1` (this isn't necessarily the case with other IO boards).
4. Connect an input device to USB.
5. Plug the power cable into the power port.

## Setup

### Update All

The `update_all.sh` script is used to download the DB9 cores, and can be used to help setup the OLED screen as well. If you don't already have it, follow the instructions on the [Update_All_MiSTer repo](https://github.com/theypsilon/Update_All_MiSTer) to get it installed.

### OLED Screen

Following these steps will enable the OLED screen on your MiSTer Plus. The official repository recommends confirming that the correct bus is being used first; if you'd like to follow that recommendation, you can follow the instructions in the [!!Warning!! section of the MiSTer_i2c2oled repository](https://github.com/venice1200/MiSTer_i2c2oled#-warning-).

1. Run the `update_all` script.
2. When the countdown appears, press `UP` to enter the settings menu.
3. Enter the `Misc` submenu.
4. Toggle `i2c2oled files` to `Yes`.
5. Select `BACK` to return to the main menu.
6. Run the `SAVE` option to save your changes.
7. Run the `EXIT and RUN UPDATE ALL` option to update your mister and grab the i2c2oled script.
8. Once `update_all` has finished, run the new `update_i2c2oled` script.

### DB9 User IO and SNAC8

The DB9 user IO port on the MiSTer Plus can be used directly or with an adapter. To learn how to setup and use this port, read the guide on [DB9 User IO and SNAC8](db9-user-io-and-snac8.md).

### Real Time Clock

Following these steps will enable and test the real time clock, which is used by some cores to show the current time when the internet isn't available.

1. Run the `rtc` script (ensure the internet is connected).
2. Once `rtc` has finished, remove the wifi adapter and power down the MiSTer.
3. Power the MiSTer back up and ensure the time is correct. (if it isn't you may need to disassemble the MiSTer Plus and ensure the battery is connected to the IO board correctly and has a charge).
4. You can now re-connect the internet.
